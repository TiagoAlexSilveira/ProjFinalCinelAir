@model ProjFinalCinelAirClient.Models.TransferMilesViewModel
@{
    ViewData["Title"] = "TransferMiles";
}

<partial name="_MainMenuPartial" />


<form method="post" asp-action="MileShopTransferMiles_confirm">
    <p>
        <input asp-for="SelectedClientNumber" type="search" placeholder="Client Number" value="@Model.Client_Number" style="width: 300px" />
        @*<input type="submit" value="dsdj" class="btn btn-primary"/>*@
        @*<a asp-action="MileShopTransferMiles">Get all Clients</a>*@
    </p>



    @if ((string)@TempData["t"] == "Selected Client does not exist!")
    {
        <div class="alert alert-danger" role="alert" style="font-size:large; font-weight:bold">@TempData["t"]</div>
    }
    else
    {
        <div class="text-success" style="font-size:large; font-weight:bold">@TempData["t"]</div>
    }

    <br />


    <div class="row" style="font-weight: bold; grid-row-gap: 1em">
        @foreach (var item in Model.ShopList)
        {
            <div class="col-md-3" style="height:60px;border: solid 1px black">
                <div class="row">
                    <div class="col-md-5">
                        @item.MileQuantity
                    </div>
                    <div class="col-md-3">
                        <input value="@item.Id" type="radio" asp-for="SelectedRadio" id="@item" />
                    </div>
                </div>
            </div>
        }

    </div>
    <br />
    @if ((string)TempData["radio"] == "Please select an amount")
    {
        <div class="alert alert-danger" role="alert" style="font-size:large; font-weight:bold">@TempData["radio"]</div>
    }
    <br />

    <div>
        Miles transfers cost $7.50 EUR* per 1000 miles

        *Plus a processing fee of $30.00 per transaction
    </div>

    <br />

    <div row id="total_div" style="visibility:hidden; border: 1px solid black">
        <div class="col-md-2">

        </div>
        <div class="col-md-5">
            <p>Buy <span id="milesPicked"></span></p>
            <p>You will have <span id="haveMiles"></span> Miles after this purchase</p>
        </div>
        <div class="col-md-2">
            Total: <span id="totalMoney"></span>€
        </div>
        <div class="col-md-2">

        </div>
    </div>

    <button id="finish" value="Finish Purchase" type="submit" class="btn btn-primary">finish</button>

</form>


@*<script type="text/javascript">
    function getData(Miles) {
        var totalElem = document.getElementById("total_div")
        var finishElem = document.getElementById("finish")
        var milesPickedElem = document.getElementById("milesPicked")
        var haveMilesElem = document.getElementById("haveMiles")
        var totalMoneyElem = document.getElementById("totalMoney")

        totalElem.style.visibility = "visible";

        @foreach (var product in Model.ShopList)
        {
            <text>
                if ('@product' == Miles) {

                    milesPickedElem.textContent = '@product';

                    finishElem.name = '@product';
                    finishElem.style.display = "inline";
                    finishElem.style.visibility = "visible";
                }
            </text>

        }
    }


    function submitSearch() {
        txtElem = document.getElementById("sbox")
        var aux = txtElem.value;
        console.log(txtElem.value)

        $.ajax({
            url: "@Url.Action("MileShopTransferMiles2", "ClientArea")",
            type: 'Get',
            data: { search: aux },
             success: function (res) {

             }
         })
    }


    function submitTransfer(id) {
        console.log(id)

         $.ajax({
             url: "@Url.Action("MileShopTransferMiles_Confirm", "ClientArea")",
             type: 'Post',
             data: { id: id },
             success: function (res) {

             }
         })
    }

</script>*@



